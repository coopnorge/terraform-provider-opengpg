# Encrypted Message Resource

This resource simply encrypts given content with given public keys, without signing.

This resource will keep GPG keys IDs in state file instead of keeping entire
public keys. Only SHA-256 of content will be stored in the state.

If either `content` or `public_keys` parametrs changes, the file will be re-encrypted.

This resource can be used to encrypt secrets generated by Terraform
(e.g. SSHprivate keys), so they can be safely pushes to
some storage (e.g. GCS bucket).

## Example Usage

```hcl
resource "opengpg_encrypted_message" "example" {
  content     = "This is example of GPG encrypted message."
  public_keys = [
    var.opengpg_public_key,
  ]
}

variable "opengpg_public_key" {
  default = <<EOF
-----BEGIN PGP PUBLIC KEY BLOCK-----

mDMEZumPqxYJKwYBBAHaRw8BAQdAbEfcyIa1K25/DMwIocm+MfYYAF3jlq8+GxjY
7FjzZ9S0LGZvb2Jhci1lY2MyNTUxOSAoZm9vYmFyKSA8Zm9vQGJhci1jdXJ2ZS5j
b20+iJMEExYKADsWIQT3olI2/t6HX2MIvmYnB22SxES8hwUCZumPqwIbAwULCQgH
AgIiAgYVCgkICwIEFgIDAQIeBwIXgAAKCRAnB22SxES8hyrnAQCtqpxMtfX6XEbd
W5Ao9sfBDs3q3ajL+UOCrV/iQG3dQQEA5jbFcyju/LSL4Dkb4JF8zKiWa19hzdGW
rAlC9eYHcAm4OARm6Y+rEgorBgEEAZdVAQUBAQdAA77h3XlxlSlYygtVs/mwPXyb
szkpBnI3TlJQqUeLaTYDAQgHiHgEGBYKACAWIQT3olI2/t6HX2MIvmYnB22SxES8
hwUCZumPqwIbDAAKCRAnB22SxES8h/ErAQDlnDX+BRfsGyPR+WzhnTCV+fUvaWsG
wCnk1/Lh1fpGhAEAhFokVxfOaontUAnC/dDsxSZ7KdLVgOOuwZskhidIagk=
=1j0l
-----END PGP PUBLIC KEY BLOCK-----
EOF
}
```

## Argument Reference

* `content` - (Required) Takes message to encrypt as a string.
* `public_keys`- (Required) Takes array of GPG public keys in ASCII-armored format,
which will be used to encrypt the message.

## Attribute Reference

* `result` - Stores GPG encrypted message in ASCII-armored format.
